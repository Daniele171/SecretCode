<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secret Code</title>

    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#333333">
    
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('./sw.js')
            .then(reg => console.log('Service Worker registrato!', reg))
            .catch(err => console.log('Errore Service Worker:', err));
        });
      }
    </script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f0f2f5; display: flex; flex-direction: column; align-items: center; padding: 20px; user-select: none; }
        h1 { color: #333; margin-bottom: 20px; }
        .game-container { background-color: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); display: flex; gap: 40px; max-width: 800px; }
        .board { display: flex; flex-direction: column-reverse; gap: 8px; background-color: #333; padding: 15px; border-radius: 10px; }
        .row { display: flex; align-items: center; gap: 15px; background-color: #444; padding: 8px; border-radius: 5px; opacity: 0.5; pointer-events: none; transition: 0.3s; }
        .row.active { opacity: 1; border: 2px solid #aaa; pointer-events: auto; background-color: #555; }
        .guess-holes { display: flex; gap: 10px; }
        .hole { width: 40px; height: 40px; border-radius: 50%; background-color: #222; border: 2px solid #666; cursor: pointer; transition: transform 0.1s; }
        .hole:active { transform: scale(0.9); }
        .feedback { display: grid; grid-template-columns: 1fr 1fr; gap: 4px; background-color: #222; padding: 5px; border-radius: 4px; width: 34px; height: 34px; justify-content: center; align-content: center; }
        .feedback-peg { width: 12px; height: 12px; border-radius: 50%; background-color: #444; }
        .feedback-peg.black { background-color: #ff4757; border: 1px solid white; }
        .feedback-peg.white { background-color: #ffffff; }
        .controls-area { display: flex; flex-direction: column; justify-content: center; gap: 25px; min-width: 220px; }
        .status-msg { text-align: center; font-weight: bold; min-height: 24px; color: #555; }
        .color-picker { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; justify-items: center; background: #eee; padding: 15px; border-radius: 10px; }
        .color-btn { width: 50px; height: 50px; border-radius: 50%; border: 4px solid transparent; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .color-btn:hover { transform: scale(1.1); }
        .color-btn.selected { border-color: #333; transform: scale(1.15); box-shadow: 0 0 10px rgba(0,0,0,0.3); }
        .c-orange { background-color: #FFA500; }
        .c-yellow { background-color: #FFD700; }
        .c-red { background-color: #FF4136; }
        .c-green { background-color: #2ECC40; }
        .c-blue { background-color: #0074D9; }
        .c-brown { background-color: #8B4513; }
        .action-btn { padding: 15px; font-size: 18px; font-weight: bold; background-color: #007bff; color: white; border: none; border-radius: 8px; cursor: pointer; transition: background 0.2s; }
        .action-btn:hover { background-color: #0056b3; }
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); display: none; flex-direction: column; justify-content: center; align-items: center; color: white; z-index: 100; }
        .secret-reveal { display: flex; gap: 15px; margin: 25px 0; }
        .revealed-peg { width: 50px; height: 50px; border-radius: 50%; border: 3px solid white; box-shadow: 0 0 15px rgba(255,255,255,0.5); }
    </style>
</head>
<body>
    <h1>Secret Code</h1>
    <div class="game-container">
        <div class="board" id="board"></div>
        <div class="controls-area">
            <div class="status-msg" id="statusMsg">Tocca un colore per iniziare!</div>
            <div class="color-picker">
                <div class="color-btn c-orange" onclick="handleColorSelect('orange')"></div>
                <div class="color-btn c-yellow" onclick="handleColorSelect('yellow')"></div>
                <div class="color-btn c-red" onclick="handleColorSelect('red')"></div>
                <div class="color-btn c-green" onclick="handleColorSelect('green')"></div>
                <div class="color-btn c-blue" onclick="handleColorSelect('blue')"></div>
                <div class="color-btn c-brown" onclick="handleColorSelect('brown')"></div>
            </div>
            <button class="action-btn" onclick="handleCheck()">VERIFICA CODICE</button>
        </div>
    </div>
    <div class="modal" id="resultModal">
        <h2 id="modalTitle" style="font-size: 32px; margin: 0;"></h2>
        <p style="font-size: 18px; margin-top: 10px;">Il codice segreto era:</p>
        <div class="secret-reveal" id="secretReveal"></div>
    </div>
    <script type="module" src="./main.js"></script>
</body>
</html>